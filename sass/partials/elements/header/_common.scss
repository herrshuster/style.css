header{
	background-color: rgba(red($color-drawer), green($color-drawer), blue($color-drawer), $unit__header--opacity);	
	height: #{$unit__header--height + $unit__nav--height};//only on larger screens. move inside mq
	position: fixed;
	top: 0;
	left: 0;
	box-sizing: content-box;
	min-height: $unit__nav--height;
	transition: all $length__transition $style__animation-ease;
			-webkit-transition: all $length__transition $style__animation-ease;
	/*multiple headers get styled into tabs. See foxnews for example*/
	.logo{/*site logo*/
		display: inline-block;		
		float: left;
    	height: #{$unit__nav--height};
    	margin-top: #{($unit__header--height - $unit__nav--height) / 3};
    	margin-left: 1rem;
	}
	h1{/*site tite*/
		display: inline-block;
		float: left;
		line-height: #{$unit__header--height};
		margin-top: 0;
		padding: 0;
		white-space: nowrap;
		font-size: typography(h2,font-size) * 1rem;
		line-height: typography(h2,line-height) * 1rem;
		padding-top: typography(h2,padding-top) * 1rem;
		padding-bottom: typography(h2,padding-bottom) * 1rem;
		font-weight: typography(h2,font-weight);
		font-style: typography(h2,font-style);
	}
	.logo + h1{
		margin-left: 1rem;
	}
	address{
		//height: #{$unit__nav--height};
		a, a:before{
			color: $color-background;
			text-decoration: none;
		}
	}

	section{
		&.masthead{
			position: absolute;
			margin: 0 auto;
			white-space: nowrap;
			text-align: center;
			width: 100%;
			padding: 0 1rem;
			height: #{$unit__header--height};	
			transition: all $length__transition $style__animation-ease;
			-webkit-transition: all $length__transition $style__animation-ease;	
			/*masthead should be centered on page*/
			.logo{
				float: none;/*site logo*/}
			h1{
				float: none;				
			}
			.logo + h1{
				position: relative;
				top: -#{$unit__nav--height / 4};
			}
			address{/*address info*/}
		}
		&.user{
			background-color: $color-drawer;
			//padding: 0.38rem 0 0.62rem 0;
			//margin-right: 1rem;
			height: 1.5rem;
			display: table;
			@include box-shadow($color-drawer);
			position: absolute;
			right: 0;
			top: 0;
			text-align: center;
			//float: right;
			a{
				display: table-cell;
				vertical-align: middle;
				text-decoration: none;
				color: mix($color-text, $color-background);
				font-size: typography(small,font-size) * 1rem;
				line-height: typography(small,line-height) * 1rem;
				padding: 0.25rem 0.5rem;	
				font-weight: typography(small,font-weight);
				font-style: typography(small,font-style);
				/*&:after{
					content: " |";
				}
				&:last-of-type:after{
					content: "";
				}*/
				//margin: 0.38rem 1rem 0.62rem 1rem;
			}
		}
		&.search{
			//position: fixed;
			//top: 2rem;
			//right: 0;
			position: absolute;
			top: 0;
			right: 1rem;
			height: $unit__header--height;
			display: table;
			text-align: right;
			transition: all $length__transition $style__animation-ease;
			-webkit-transition: all $length__transition $style__animation-ease;
			form {
				display: table-cell;
				vertical-align: middle;
				height: 2rem;
				float: none;
				input[type="search"]{
					height: 1.5rem;
					margin-top: 0.25rem;	
					text-align: right;							
				}
				input[type="submit"]{
					height: 1.5rem;
					margin-top: 0.25rem;
					border: 0;
					padding: 0 0.5rem;					
				}
			}
			.compact{/*expanding box*/}
			@include small-search-box;
			margin-right: 1rem;
		}
	}
	nav{
		position: relative;
		top: #{$unit__header--height};	
		transition: all $length__transition $style__animation-ease;
			-webkit-transition: all $length__transition $style__animation-ease;
		>ul{
			position: relative;
			max-width: $max-width;			
			min-height: #{$unit__nav--height};
			//background-color: $color-drawer;		
			background-color: rgba(red($color-drawer), green($color-drawer), blue($color-drawer), $unit__header--opacity);
			float: none;
			width: 100%;
			height: auto;
			margin: 0 auto;			
			padding: 0;
			list-style: none;
			display: table;
			table-layout: fixed;
			box-sizing: border-box;
			>div{
				display:none;
			}
			>div + li{
				
			}
			li{		
				box-sizing: border-box;										
				table-layout: fixed;	
				vertical-align: middle;	
				position: relative;
				border-radius: $unit__border-radius;
				border-bottom-right-radius: 0;
				border-bottom-left-radius: 0;
				&:hover{
					background-color: $color-primary;
					border: none;
					//outline: 1px solid $color-primary;
					>ul{
						@include box-shadow($color-primary);
						li{
							margin-bottom: 0;
						}
					}
					>a, >a:hover{
						color: $color-background;
					}					
				}
				> a{									
					text-decoration: none;
					width: 100%;
					display: block;												
				}
				ul{
					background-color: $color-drawer;
					display: table;
					position: absolute;
					padding: 0;
					border-radius: $unit__border-radius;
					border-top-right-radius: 0;
					border-top-left-radius: 0;
					@include box-shadow($color-drawer);
					@include transition;
					&:hover{
						border: 1px none none none;
					}
					li{
						margin-bottom: -100%;
						@include transition;
						border-radius: 0;
						&:last-of-type{
							border-bottom-right-radius: $unit__border-radius;
							border-bottom-left-radius: $unit__border-radius;
						}
					}
					& + a{
						position: relative;
					}
					& + a:after{
						content: ' ';
						display: block;
						width: 0; 
						height: 0; 
						position: absolute;
						border-top: #{$unit__nav--height / 4} solid $color-primary; 
						border-left: #{$unit__nav--height / 8} solid transparent; 
						border-right: #{$unit__nav--height / 8} solid transparent;
						@include transition;				
					}								
					li{
						display: table;					
						height: $unit__nav--height;
						a{
							display: table-cell;
							vertical-align: middle;
						}
					}
				}
				ul{
					overflow: hidden;
					width: 100%;
					border: 0;
					li{
						float:left;
						width: 100%;

					}
				}		
			}
		}		
	}
}





/* This is the clickable label */
.slide-toggle {
	float: left;
	cursor: pointer;	
	//left: -2rem;
	z-index: 1;
	display: none;
	color: $color-primary;
	margin: 0;
	position: absolute;
	top: #{$unit__nav--height / 4};
	bottom: 0;
	left: 1rem;
	right: auto;
	padding: 0;
}

/* Kill the nasty outlines everywhere */
.slide-toggle,
.slide-toggle:active,
.slide-toggle:focus {
	border: none !important;
	outline: none !important;
	-webkit-tap-highlight-color: rgba(0,0,0,0);
}

/* The :after pseudo element has an icon that covers the checkbox */
.slide-toggle:after {
	content: "\f0c9";	
	display: block;
	font: #{$unit__nav--height} 'fontawesome';
	text-align: center;	
	@include text-shadow;
	height: #{$unit__nav--height * 0.85};
	-webkit-transition: -webkit-transform #{$length__transition / 2} $style__animation-ease;
			-moz-transition: -moz-transform #{$length__transition / 2} $style__animation-ease;
			-o-transition: -o-transform #{$length__transition / 2} $style__animation-ease;
			transition: transform #{$length__transition / 2} $style__animation-ease;
}

/* This is the checkbox */
.slide-checkbox {
	position: absolute;
	top: -9999px;
	left: -9999px;
}

/* When it's checked replace the menu icon with a close icon */
.slide-checkbox:checked ~ .slide-toggle:after {
	content: '\f0c9';
}


/*only show mobile nav on @media handheld*/

@media all and (max-width:#{$unit__base-x-eight * 1px}){
	header{
		section.search{
			@include small-search-box;
			right: 1rem;
			left: auto;
			margin-right: 1rem;
		}
		nav{
			position: fixed;
			top: #{$unit__header--height};
			left: -1px;
			height: 100%;			
			height: 100%;
			z-index: 999;
			padding-bottom: 100%;			
			section.user{
				width: 100%;
				& + ul{
					top: #{$unit__nav--height};
				}
			}
			ul{
				display: block;
				float: left;				
				top: 0;
				background-color: $color-drawer;
			}
			address{
				margin-top: 0;
				width: auto;
				height: #{$unit__nav--height};
				//height: #{$unit__nav--height - $unit__nav--height / 3};
				background-color: $color-drawer;				
				top: 0;
				left: 0;
				padding-left: 0.5rem;
				text-align: center;
				border-bottom: 1px solid $color-drawer;
				a{
					line-height: #{$unit__nav--height};
					height: #{$unit__nav--height}; 
				}
			}
			address + ul{
				top: #{$unit__nav--height};
			}
			li{
				padding-left: 1rem;
				display: block;
				text-align: left;
				> a{
					padding: 1rem 0;
					height: 3rem;
				}
			}
			-webkit-transition: -webkit-transform #{$length__transition / 2} $style__animation-ease;
			-moz-transition: -moz-transform #{$length__transition / 2} $style__animation-ease;
			-o-transition: -o-transform #{$length__transition / 2} $style__animation-ease;
			transition: transform #{$length__transition / 2} $style__animation-ease;
			-webkit-transform: translateZ(0);
			-moz-transform: translateZ(0);
			-webkit-perspective: 1000;
			-moz-perspective: 1000;
			-webkit-backface-visibility: hidden;
			-moz-backface-visibility: hidden;
			-webkit-transform: translateY(100%) scale3d(1, 0, 1);
			-moz-transform: translateY(100%) scale3d(1, 0, 1);
			-ms-transform: translateY(100%) scale3d(1, 0, 1);
			-o-transform: translateY(100%) scale3d(1, 0, 1);
			transform: translateY(100%) scale3d(1, 0, 1);
			-webkit-transform-origin: 50% -100%;
			-moz-transform-origin: 50% -100%;
			-o-transform-origin: 50% -100%;
			-ms-transform-origin: 50% -100%;
			transform-origin: 50% -100%;
		}
	}
	.slide-checkbox:checked ~ nav {
		-webkit-transform: translateY(0) scale3d(1, 1, 1);
		-moz-transform: translateY(0) scale3d(1, 1, 1);
		-ms-transform: translateY(0) scale3d(1, 1, 1);
		-o-transform: translateY(0) scale3d(1, 1, 1);
		transform: translateY(0) scale3d(1, 1, 1);

	}

	.slide-toggle {
		display: block;
	}

	.slide-checkbox:checked ~ .slide-toggle:after {
		@include text-shadow-inset;	
		-webkit-transform: rotateZ(90deg);
		-moz-transform: rotateZ(90deg);
		-o-transform: rotateZ(90deg);
		-ms-transform: rotateZ(90deg);
		transform: rotateZ(90deg);
	}
}